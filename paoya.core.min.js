(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _PaoYa__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _export__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);function inject(){for(var key in _export__WEBPACK_IMPORTED_MODULE_1__){_PaoYa__WEBPACK_IMPORTED_MODULE_0__["default"][key]=_export__WEBPACK_IMPORTED_MODULE_1__[key]}}inject();window["PaoYa"]=window["PaoYa"]||_PaoYa__WEBPACK_IMPORTED_MODULE_0__["default"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var PaoYa=function(){function PaoYa(){}return PaoYa}();var PaoYa=new PaoYa;__webpack_exports__["default"]=PaoYa},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_navigator_Component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);__webpack_require__.d(__webpack_exports__,"Component",function(){return _core_navigator_Component__WEBPACK_IMPORTED_MODULE_0__["default"]});var _core_navigator_View__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"View",function(){return _core_navigator_View__WEBPACK_IMPORTED_MODULE_1__["default"]});var _core_navigator_Dialog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18);__webpack_require__.d(__webpack_exports__,"Dialog",function(){return _core_navigator_Dialog__WEBPACK_IMPORTED_MODULE_2__["default"]});var _core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19);__webpack_require__.d(__webpack_exports__,"Navigator",function(){return _core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_3__["default"]});var _core_network_Request__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"Request",function(){return _core_network_Request__WEBPACK_IMPORTED_MODULE_4__["default"]});var _core_network_Client__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(20);__webpack_require__.d(__webpack_exports__,"Client",function(){return _core_network_Client__WEBPACK_IMPORTED_MODULE_5__["default"]});var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"NotificationCenter",function(){return _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_6__["default"]});__webpack_require__.d(__webpack_exports__,"NotificationName",function(){return _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_6__["NotificationName"]});var _core_Observer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(13);__webpack_require__.d(__webpack_exports__,"Observer",function(){return _core_Observer__WEBPACK_IMPORTED_MODULE_7__["default"]});var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5);__webpack_require__.d(__webpack_exports__,"DataTrack",function(){return _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_8__["default"]});__webpack_require__.d(__webpack_exports__,"DataTrackType",function(){return _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_8__["DataTrackType"]});var _game_enums__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(12);__webpack_require__.d(__webpack_exports__,"PrizeType",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["PrizeType"]});__webpack_require__.d(__webpack_exports__,"ShareType",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["ShareType"]});__webpack_require__.d(__webpack_exports__,"RectCorner",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["RectCorner"]});__webpack_require__.d(__webpack_exports__,"GameEntryType",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["GameEntryType"]});__webpack_require__.d(__webpack_exports__,"SocketURLType",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["SocketURLType"]});__webpack_require__.d(__webpack_exports__,"RankingType",function(){return _game_enums__WEBPACK_IMPORTED_MODULE_9__["RankingType"]});var _game_main_main__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22);__webpack_require__.d(__webpack_exports__,"Main",function(){return _game_main_main__WEBPACK_IMPORTED_MODULE_10__["default"]});var _game_DataCenter__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10);__webpack_require__.d(__webpack_exports__,"DataCenter",function(){return _game_DataCenter__WEBPACK_IMPORTED_MODULE_11__["default"]});var _game_service_LoginService__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9);__webpack_require__.d(__webpack_exports__,"LoginService",function(){return _game_service_LoginService__WEBPACK_IMPORTED_MODULE_12__["default"]});var _game_service_TimerService__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(31);__webpack_require__.d(__webpack_exports__,"TimerService",function(){return _game_service_TimerService__WEBPACK_IMPORTED_MODULE_13__["default"]});var _game_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(25);__webpack_require__.d(__webpack_exports__,"LaunchScreenView",function(){return _game_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_14__["default"]});var _game_view_LoginMaskView__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(32);__webpack_require__.d(__webpack_exports__,"LoginMaskView",function(){return _game_view_LoginMaskView__WEBPACK_IMPORTED_MODULE_15__["default"]});var _game_view_RoundImageView__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(33);__webpack_require__.d(__webpack_exports__,"RoundImageView",function(){return _game_view_RoundImageView__WEBPACK_IMPORTED_MODULE_16__["default"]});var _laya_sound__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(29);__webpack_require__.d(__webpack_exports__,"SoundManager",function(){return _laya_sound__WEBPACK_IMPORTED_MODULE_17__["default"]});var _wx_manager_AuthManager__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(34);__webpack_require__.d(__webpack_exports__,"AuthManager",function(){return _wx_manager_AuthManager__WEBPACK_IMPORTED_MODULE_18__["default"]});var _wx_manager_PayManager__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(28);__webpack_require__.d(__webpack_exports__,"PayManager",function(){return _wx_manager_PayManager__WEBPACK_IMPORTED_MODULE_19__["default"]});var _wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7);__webpack_require__.d(__webpack_exports__,"ShareManager",function(){return _wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_20__["default"]});var _wx_monitor_LifeCircleMonitor__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(27);__webpack_require__.d(__webpack_exports__,"LifeCircleMonitor",function(){return _wx_monitor_LifeCircleMonitor__WEBPACK_IMPORTED_MODULE_21__["default"]});var _wx_monitor_NetworkMonitor__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(26);__webpack_require__.d(__webpack_exports__,"NetworkMonitor",function(){return _wx_monitor_NetworkMonitor__WEBPACK_IMPORTED_MODULE_22__["default"]});var _wx_Toast__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"Toast",function(){return _wx_Toast__WEBPACK_IMPORTED_MODULE_23__["default"]});var _utils_utils__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(11);__webpack_require__.d(__webpack_exports__,"Utils",function(){return _utils_utils__WEBPACK_IMPORTED_MODULE_24__["default"]});var _wx_ad_rewardedVideoAd__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(15);__webpack_require__.d(__webpack_exports__,"RewardedVideoAd",function(){return _wx_ad_rewardedVideoAd__WEBPACK_IMPORTED_MODULE_25__["default"]});var _wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"BannerAd",function(){return _wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_26__["default"]});var _utils_Array__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(35);var _utils_Array__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_utils_Array__WEBPACK_IMPORTED_MODULE_27__);var _utils_Date__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(36);var _utils_Date__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_utils_Date__WEBPACK_IMPORTED_MODULE_28__);var _utils_Number__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(37);var _utils_Number__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_utils_Number__WEBPACK_IMPORTED_MODULE_29__);var _laya_laya__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(38)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _network_Request__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);var _NotificationCenter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);var _PaoYa__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1);var _wx_ad_rewardedVideoAd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15);var _wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16);var _game_DataCenter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Component=function(_super){__extends(Component,_super);function Component(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._requests=[];_this.socket=_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].socket;_this.dialogs=[];_this.bannerAds=[];_this.navigator=_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].navigator;return _this}Component.prototype._onEnable=function(){_super.prototype._onEnable.call(this);this.owner.addClickListener(this,this.onThrottleClick,true)};Component.prototype._onViewClick=function(e){switch(e.target.name){case"pop":this.navigator.pop();break;case"popToRoot":this.navigator.popToRootScene();break}this.onThrottleClick(e)};Component.prototype.onThrottleClick=function(e){};Component.prototype._onLoad=function(){this.onLoad()};Component.prototype.onLoad=function(){};Component.prototype._onAppear=function(){this.showAllBannerAd();this.onAppear()};Component.prototype.onAppear=function(){};Component.prototype._onDisappear=function(){this.hideAllBannerAd();this.onDisappear()};Component.prototype.onDisappear=function(){};Component.prototype._destroy=function(){this.offMessageListener();this.offNotificationListener();this.destroyXMR();this.destroyBannerAd();_super.prototype._destroy.call(this)};Component.prototype._onReceiveMessage=function(cmd,value){if(!this.enabled)return;this.onReceiveMessage(cmd,value)};Component.prototype._onReceiveSocketError=function(cmd,code,message){this.onReceiveSocketError(cmd,code,message)};Component.prototype.onReceiveMessage=function(cmd,value){};Component.prototype.onReceiveSocketError=function(cmd,code,message){};Component.prototype.onMessage=function(name,caller,listener,args){this.socket.on(name,caller,listener,args)};Component.prototype.offMessageListener=function(){this.socket.offAllCaller(this)};Component.prototype.sendMessage=function(cmd,params){this.socket.sendMessage(cmd,params)};Component.prototype.onNotification=function(name,caller,listener,args){_NotificationCenter__WEBPACK_IMPORTED_MODULE_2__["default"].on(name,caller,listener,args)};Component.prototype.offNotificationListener=function(){_NotificationCenter__WEBPACK_IMPORTED_MODULE_2__["default"].offAllCaller(this)};Component.prototype.postNotification=function(name,params){_NotificationCenter__WEBPACK_IMPORTED_MODULE_2__["default"].postNotification(name,params)};Component.prototype.onReceiveNotification=function(name,params){};Component.prototype._onReceiveNotification=function(name,params){if(!this.enabled)return;this.onReceiveNotification(name,params)};Component.prototype.GET=function(path,params,success,fail){var _this=this;if(params instanceof Function){success=params;params={};fail=success}var xmr=_network_Request__WEBPACK_IMPORTED_MODULE_0__["default"].GET(path,params,function(value){success.call(_this,value)},function(msg,code){fail.call(_this,msg,code)});this._requests.push(xmr)};Component.prototype.POST=function(path,params,success,fail){var _this=this;if(params instanceof Function){success=params;params={};fail=success}var xmr=_network_Request__WEBPACK_IMPORTED_MODULE_0__["default"].POST(path,params,function(res){success.call(_this,res)},function(msg,code){fail.call(_this,msg,code)});this._requests.push(xmr)};Component.prototype.destroyXMR=function(){for(var i=this._requests.length-1;i>=0;i--){var xmr=this._requests.pop();if(xmr.http.readyState!=XMLHttpRequest.DONE){xmr.http.abort&&xmr.http.abort()}}};Component.prototype.share=function(title,image,query,success,fail){var _this=this;if(query instanceof Function){fail=success;success=query;query={}}_wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_1__["default"].share(title,image,query,function(res){success&&success.call(_this,res)},fail&&fail.bind(this))};Component.prototype.shareTitle=function(title,query,success,fail){_wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_1__["default"].shareTitle(title,query,success,fail)};Component.prototype.shareDefault=function(query,success,fail){if(query===void 0){query={}}if(typeof query=="function"){success=query;fail=success;query={}}var title=_game_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].config.game.share_list.randomItem;this.shareTitle(title,query,success,fail)};Component.prototype.showRewardedVideoAd=function(params){_wx_ad_rewardedVideoAd__WEBPACK_IMPORTED_MODULE_4__["default"].show(params)};Component.prototype.showBannerAd=function(params){var ad=_wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_5__["default"].show(params);this.bannerAds.push(ad);return ad};Component.prototype.showAllBannerAd=function(){for(var i=0,length_1=this.bannerAds.length;i<length_1;i++){var ad=this.bannerAds[i];ad.show()}};Component.prototype.hideAllBannerAd=function(){for(var i=0,length_2=this.bannerAds.length;i<length_2;i++){var ad=this.bannerAds[i];ad.hide()}};Component.prototype.destroyBannerAd=function(){for(var i=0,length_3=this.bannerAds.length;i<length_3;i++){var ad=this.bannerAds[i];ad.hide();ad.destroy()}};Component.prototype._onShow=function(res){this.onShow(res)};Component.prototype.onShow=function(res){};Component.prototype._onHide=function(res){this.onHide(res)};Component.prototype.onHide=function(res){};Component.prototype.popup=function(dialog){if(dialog instanceof Laya.Dialog){dialog.popup();this.dialogs.push(dialog)}else{console.error("当前popup的不是Dialog实例")}};Component.prototype.closeDialogs=function(){for(var i=0,length_4=this.dialogs.length;i<length_4;i++){var dialog=this.dialogs[i];dialog.destroy()}};Component.prototype.onShareAppMessage=function(){return null};Component.prototype.onNetworkChange=function(e){};Component.prototype.onSocketClose=function(){};return Component}(Laya.Script);__webpack_exports__["default"]=Component},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"RequestConfig",function(){return RequestConfig});var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var RequestConfig=function(){function RequestConfig(){}RequestConfig.baseURL="";RequestConfig.token="";RequestConfig.headers=["Content-Type","application/x-www-form-urlencoded"];RequestConfig.maxRetryTimes=3;return RequestConfig}();var Request=function(_super){__extends(Request,_super);function Request(){var _this_1=_super.call(this)||this;_this_1._retryTimes=0;var _this=_this_1;_this_1.http.ontimeout=function(e){_this.timeout(e)};return _this_1}Request.prototype.sendRequest=function(path,params,method){if(!RequestConfig.baseURL){console.error("请指定baseURL");return}this._path=path;if(RequestConfig.makeParamsHandler){params=RequestConfig.makeParamsHandler(params)}console.log("R >>> | "+path+" | "+(params["wxparams"]||JSON.stringify(params)));var items=[];for(var key in params){items.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]))}var result=items.join("&");var url=RequestConfig.baseURL+path;if(method=="get"){url+="?"+result;result=null}this.$url=url;this.$query=result;this.$method=method;this.send(url,result,method,null,RequestConfig.headers)};Request.prototype.GET=function(path,params){this.sendRequest(path,params,"get")};Request.prototype.POST=function(path,params){this.sendRequest(path,params,"post")};Request.prototype.complete=function(){console.log("R <<< | "+this._path+" | "+this.http.responseText);_super.prototype.complete.call(this)};Request.prototype.error=function(message){_super.prototype.error.call(this,message)};Request.prototype.timeout=function(message){if(this._retryTimes<RequestConfig.maxRetryTimes){this._retryTimes++;_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_0__["default"].track(_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_0__["DataTrackType"].HTTPRetry,{c:this.$url,t:this._retryTimes});setTimeout(function(){this.send(this.$url,this.$query,this.$method,null,RequestConfig.headers)}.bind(this),500)}else{this.error(message)}};Request.GET=function(path,params,suc,fail){var _this_1=this;if(fail===void 0){fail=null}var xmr=new Request;xmr.on(Laya.Event.COMPLETE,this,function(data){_this_1.handleError(data,suc,fail)});xmr.on(Laya.Event.ERROR,this,function(res){fail&&fail.call(_this_1,res||"连接服务器失败")});xmr.GET(path,params);return xmr};Request.POST=function(path,params,suc,fail){var _this_1=this;if(fail===void 0){fail=null}var xmr=new Request;xmr.on(Laya.Event.COMPLETE,this,function(data){_this_1.handleError(data,suc,fail)});xmr.on(Laya.Event.ERROR,this,function(res){fail&&fail.call(_this_1,res||"连接服务器失败")});xmr.POST(path,params);return xmr};Request.handleError=function(data,suc,fail){data=JSON.parse(data);var code=data.code;if(code==200){suc&&suc.call(this,data.value)}else{fail&&fail.call(this,data.message||"请求出现错误",data.errorcode?data.errorcode:code)}};return Request}(Laya.HttpRequest);__webpack_exports__["default"]=Request},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DataTrackType",function(){return DataTrackType});var _mta_analysis__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);var _core_network_Request__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);var _PaoYa__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var DataTrack=function(){function DataTrack(){}DataTrack.setup=function(appID,eventID,options){if(appID===void 0){appID="500624773"}if(eventID===void 0){eventID="500624774"}_mta_analysis__WEBPACK_IMPORTED_MODULE_0__["default"].App.init({appID:appID,eventID:eventID,lauchOpts:options})};DataTrack.track=function(type,params){if(!params.gameId&&_PaoYa__WEBPACK_IMPORTED_MODULE_2__["default"].game.gameId){params.gameId=_PaoYa__WEBPACK_IMPORTED_MODULE_2__["default"].game.gameId}if(params.data){var value=JSON.parse(params.data);value.T=_PaoYa__WEBPACK_IMPORTED_MODULE_2__["default"].networkMonitor.type;params.data=JSON.stringify(value)}console.log("T | upload | "+JSON.stringify(params));_mta_analysis__WEBPACK_IMPORTED_MODULE_0__["default"].Event.stat(type+"",params)};DataTrack.trackType=function(type){_core_network_Request__WEBPACK_IMPORTED_MODULE_1__["default"].POST("userStatistics",{type:type},null)};DataTrack.now=function(){return(new Date).valueOf()};DataTrack.startTrackTime=function(id){this.loginCostTime[id]=DataTrack.now()};DataTrack.stopTrackTime=function(id){var time=this.loginCostTime[id];var delta=DataTrack.now()-time;this.loginCostTime[id]=delta;console.warn("T | "+id+" | cost | "+delta+" ms")};DataTrack.startSocketTime=function(){this.socketCostTime=DataTrack.now()};DataTrack.stopSocketTime=function(){var time=DataTrack.now()-this.socketCostTime;console.warn("T | Socket | cost | "+time+"ms");this.track(DataTrackType.SocketTimeCost,{data:JSON.stringify({t:time})})};DataTrack.startSocketLogin=function(){this.socketLoginTime=DataTrack.now()};DataTrack.stopSocketLogin=function(){var time=DataTrack.now()-this.socketLoginTime;console.warn("T | Socket login | cost | "+time+"ms");this.track(DataTrackType.SocketLoginTimeCost,{data:JSON.stringify({t:time})})};DataTrack.uploadLoginCostTime=function(){var upload=JSON.stringify(this.loginCostTime);console.log("T | login | upload | "+upload);this.track(DataTrackType.LoginTimeCost,{data:upload})};DataTrack.loginCostTime={};DataTrack.socketCostTime=0;DataTrack.socketLoginTime=0;return DataTrack}();__webpack_exports__["default"]=DataTrack;var DataTrackType;(function(DataTrackType){DataTrackType[DataTrackType["LoginTimeCost"]=3001]="LoginTimeCost";DataTrackType[DataTrackType["SocketTimeCost"]=3002]="SocketTimeCost";DataTrackType[DataTrackType["SocketLoginTimeCost"]=3003]="SocketLoginTimeCost";DataTrackType[DataTrackType["SocketRetry"]=3004]="SocketRetry";DataTrackType[DataTrackType["HTTPRetry"]=3005]="HTTPRetry";DataTrackType[DataTrackType["Ladder"]=1001]="Ladder";DataTrackType[DataTrackType["FriendBattle"]=1002]="FriendBattle";DataTrackType[DataTrackType["RedPacket"]=1003]="RedPacket";DataTrackType[DataTrackType["PlayOffline"]=1004]="PlayOffline";DataTrackType[DataTrackType["Rank"]=1004]="Rank";DataTrackType[DataTrackType["HallBack"]=1006]="HallBack";DataTrackType[DataTrackType["WithDraw"]=1007]="WithDraw";DataTrackType[DataTrackType["Jump"]=1008]="Jump";DataTrackType[DataTrackType["Change"]=1009]="Change"})(DataTrackType||(DataTrackType={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var MTA_CONFIG={app_id:"",event_id:"",api_base:"https://pingtas.qq.com/pingd",prefix:"_mta_",version:"1.3.5",stat_share_app:!1,stat_pull_down_fresh:!1,stat_reach_bottom:!1};function getNetworkType(a){wx.getNetworkType({success:function(b){a(b.networkType)}})}function getSystemInfo(){var a=wx.getSystemInfoSync();return{adt:encodeURIComponent(a.model),scl:a.pixelRatio,scr:a.windowWidth+"x"+a.windowHeight,lg:a.language,fl:a.version,jv:encodeURIComponent(a.system),tz:encodeURIComponent(a.platform)}}function getUID(){try{return wx.getStorageSync(MTA_CONFIG.prefix+"auid")}catch(a){}}function setUID(){try{var a=getRandom();wx.setStorageSync(MTA_CONFIG.prefix+"auid",a);return a}catch(b){}}function getSID(){try{return wx.getStorageSync(MTA_CONFIG.prefix+"ssid")}catch(a){}}function setSID(){try{var a="s"+getRandom();wx.setStorageSync(MTA_CONFIG.prefix+"ssid",a);return a}catch(b){}}function getRandom(a){for(var b=[0,1,2,3,4,5,6,7,8,9],c=10;1<c;c--){var d=Math.floor(10*Math.random()),e=b[d];b[d]=b[c-1];b[c-1]=e}for(c=d=0;5>c;c++)d=10*d+b[c];return(a||"")+(d+""+ +new Date)}function getPagePath(){try{var a=getCurrentPages(),b="/";0<a.length&&(b=a.pop().__route__);return b}catch(c){console.log("get current page path error:"+c)}}function getMainInfo(){var a={dm:"wechat.apps.xx",url:getPagePath(),pvi:"",si:"",ty:0};a.pvi=function(){var b=getUID();b||(b=setUID(),a.ty=1);return b}();a.si=function(){var a=getSID();a||(a=setSID());return a}();return a}function getBasicInfo(){var a=getSystemInfo();getNetworkType(function(a){try{wx.setStorageSync(MTA_CONFIG.prefix+"ntdata",a)}catch(c){}});a.ct=wx.getStorageSync(MTA_CONFIG.prefix+"ntdata")||"4g";return a}function getExtentInfo(){var a=MTA.Data.userInfo;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);a=b.join(";");return{r2:MTA_CONFIG.app_id,r4:"wx",ext:"v="+MTA_CONFIG.version+(null!==a&&""!==a?";ui="+encodeURIComponent(a):"")}}var MTA={App:{init:function(a){"appID"in a&&(MTA_CONFIG.app_id=a.appID);"eventID"in a&&(MTA_CONFIG.event_id=a.eventID);"statShareApp"in a&&(MTA_CONFIG.stat_share_app=a.statShareApp);"statPullDownFresh"in a&&(MTA_CONFIG.stat_pull_down_fresh=a.statPullDownFresh);"statReachBottom"in a&&(MTA_CONFIG.stat_reach_bottom=a.statReachBottom);setSID();"lauchOpts"in a&&(MTA.Data.lanchInfo=a.lauchOpts,MTA.Data.lanchInfo.landing=1)}},Page:{init:function(){var a=getCurrentPages()[getCurrentPages().length-1];a.onShow&&!function(){var b=a.onShow;a.onShow=function(){MTA.Page.stat();b.call(this,arguments)}}();MTA_CONFIG.stat_pull_down_fresh&&a.onPullDownRefresh&&!function(){var b=a.onPullDownRefresh;a.onPullDownRefresh=function(){MTA.Event.stat(MTA_CONFIG.prefix+"pulldownfresh",{url:a.__route__});b.call(this,arguments)}}();MTA_CONFIG.stat_reach_bottom&&a.onReachBottom&&!function(){var b=a.onReachBottom;a.onReachBottom=function(){MTA.Event.stat(MTA_CONFIG.prefix+"reachbottom",{url:a.__route__});b.call(this,arguments)}}();MTA_CONFIG.stat_share_app&&a.onShareAppMessage&&!function(){var b=a.onShareAppMessage;a.onShareAppMessage=function(){MTA.Event.stat(MTA_CONFIG.prefix+"shareapp",{url:a.__route__});return b.call(this,arguments)}}()},stat:function(){if(""!=MTA_CONFIG.app_id){var a=[],b=getExtentInfo(),c=[getMainInfo(),b,getBasicInfo()];MTA.Data.lanchInfo&&(c.push({ht:MTA.Data.lanchInfo.scene,rdm:"/",rurl:MTA.Data.lanchInfo.path}),MTA.Data.lanchInfo.query&&MTA.Data.lanchInfo.query._mta_ref_id&&c.push({rarg:MTA.Data.lanchInfo.query._mta_ref_id}),1==MTA.Data.lanchInfo.landing&&(b.ext+=";lp=1",MTA.Data.lanchInfo.landing=0));c.push({rand:+new Date});b=0;for(var d=c.length;b<d;b++)for(var e in c[b])c[b].hasOwnProperty(e)&&a.push(e+"="+("undefined"==typeof c[b][e]?"":c[b][e]));wx.request({url:MTA_CONFIG.api_base+"?"+a.join("&").toLowerCase()})}}},Event:{stat:function(a,b){if(""!=MTA_CONFIG.event_id){var c=[],d=getMainInfo(),e=getExtentInfo();d.dm="wxapps.click";d.url=a;e.r2=MTA_CONFIG.event_id;var f="undefined"===typeof b?{}:b;var k=[],g;for(g in f)f.hasOwnProperty(g)&&k.push(encodeURIComponent(g)+"="+encodeURIComponent(f[g]));f=k.join(";");e.r5=f;f=0;d=[d,e,getBasicInfo(),{rand:+new Date}];for(e=d.length;f<e;f++)for(var h in d[f])d[f].hasOwnProperty(h)&&c.push(h+"="+("undefined"==typeof d[f][h]?"":d[f][h]));wx.request({url:MTA_CONFIG.api_base+"?"+c.join("&").toLowerCase()})}}},Data:{userInfo:null,lanchInfo:null}};__webpack_exports__["default"]=MTA},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var ShareService=function(){function ShareService(){this.successHandler=null;this.failHandler=null;this.inShare=false;this.shareTime=0;_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].on(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].ApplicationShow,this,this.onShow)}ShareService.prototype.onShow=function(res){if(!this.successHandler)return;if(Date.now()-this.shareTime<3e3){this.shareTime=0;if(this.failHandler){this.failHandler("分享到群才可以哦");this.stopObserve();return}}var random=Math.floor(Math.random()*3);random=0;if(random==0){this.successHandler(res);this.successHandler=null}else{if(this.failHandler){this.failHandler("请分享至群");this.failHandler=null}}this.stopObserve()};ShareService.prototype.startObserve=function(suc,fail){this.shareTime=Date.now();this.successHandler=suc;this.failHandler=fail};ShareService.prototype.stopObserve=function(){this.successHandler=null;this.failHandler=null};return ShareService}();var ShareManager=function(){function ShareManager(){}ShareManager.makeShareInfo=function(title,image,query,success,fail){if(image===void 0){image=this.imageURL}if(fail===void 0){fail=null}if(this.makeQueryHandler){query=this.makeQueryHandler(query)}console.warn("分享出去的参数为"+JSON.stringify(query));return{title:title,imageUrl:image,query:toQueryString(query),success:success,fail:function(){fail&&fail()}}};ShareManager.share=function(title,image,query,success,fail){if(fail===void 0){fail=null}var imageURL=image;if(!imageURL){imageURL=this.getShareImageURL()}if(!imageURL){console.error("必须指定分享图片地址，建议使用ShareManager.imageURL全局设置统一分享图片");return}this._shareService||(this._shareService=new ShareService);var shareService=this._shareService;if(window["wx"]){shareService.startObserve(success,fail)}py.shareAppMessage(this.makeShareInfo(title,image,query,function(res){shareService.stopObserve();console.warn("SHARE | "+JSON.stringify(res));success&&success(res)},function(res){shareService.stopObserve();fail&&fail(res)}))};ShareManager.shareTitle=function(title,query,success,fail){if(fail===void 0){fail=null}var imageURL=this.getShareImageURL();if(!imageURL){console.error("必须指定 ShareManager.imageURL 才可执行此方法");return}this.share(title,imageURL,query,success,fail)};ShareManager.getShareInfo=function(shareTicket,suc,fail){py.getShareInfo({shareTicket:shareTicket,timeout:6e4,success:function(res){console.log("SHARE | getShareInfo | "+JSON.stringify(res));suc&&suc(res)},fail:fail})};ShareManager.getShareImageURL=function(){var imageURL=null;if(this.makeShareImageURLHandler){imageURL=this.makeShareImageURLHandler()}if(typeof imageURL!=="string"){imageURL=this.imageURL;console.warn("ShareManager.makeShareImageURLHandler 必须返回 string 类型的图片地址")}return imageURL};ShareManager.checkGroup=false;ShareManager._shareService=null;return ShareManager}();__webpack_exports__["default"]=ShareManager;function toQueryString(params){var items=[],queryStr="";for(var key in params){items.push(key+"="+params[key])}if(items.length){queryStr=items.join("&")}return queryStr}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"NotificationName",function(){return NotificationName});var _game_service_LoginService__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);var NotificationCenter=function(){function NotificationCenter(){}NotificationCenter.on=function(type,caller,listener,args){return this.defaultCenter.on(type,caller,listener,args)};NotificationCenter.addLoginNotification=function(caller,listener){if(_game_service_LoginService__WEBPACK_IMPORTED_MODULE_0__["default"].isLogined){listener.call(caller)}else{NotificationCenter.once(NotificationName.LoginSuccess,caller,listener)}};NotificationCenter.once=function(type,caller,listener,args){return this.defaultCenter.once(type,caller,listener,args)};NotificationCenter.event=function(type,data){return this.defaultCenter.event(type,data)};NotificationCenter.off=function(type,caller,listener,onceOnly){return this.defaultCenter.off(type,caller,listener,onceOnly)};NotificationCenter.offAll=function(type){return this.defaultCenter.offAll(type)};NotificationCenter.offAllCaller=function(caller){return this.defaultCenter.offAllCaller(caller)};NotificationCenter.postNotification=function(type,data){return this.defaultCenter.event(type,data)};NotificationCenter.defaultCenter=new Laya.EventDispatcher;return NotificationCenter}();__webpack_exports__["default"]=NotificationCenter;var NotificationName=function(){function NotificationName(){}NotificationName.ApplicationShow="app-show";NotificationName.ApplicationHide="app-hide";NotificationName.GameShow="game-show";NotificationName.NetworkChanged="network-changed";NotificationName.LoginSuccess="login-success";NotificationName.GOLD_CHANGE="CHANGE_GOLD";NotificationName.RMB_CHANGE="rmb-change";NotificationName.START_GAME="start-game";return NotificationName}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"LoginConfig",function(){return LoginConfig});var _DataCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var _wx_Toast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14);var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5);var _core_network_Request__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8);var LAST_GET_USERINFO_TIME_KEY="lastGetUserInfoTime";var USER_TOKEN_KEY="userTokenKey";var LoginConfig=function(){function LoginConfig(){}LoginConfig.userId=123456;LoginConfig.gameId=1004;LoginConfig.version="1.0";LoginConfig.release=1;LoginConfig.requestConfig=1;return LoginConfig}();var LoginService=function(){function LoginService(){}LoginService.login=function(suc,fail){var _this=this;if(!this.token){this.lastGetUserInfoTime=0}var beginTime=Date.now();var day7=7*24*60*60*1e3;var params={requestUserInfo:beginTime-this.lastGetUserInfoTime>day7};py.login(params,function(res){if(!window["wx"]&&!window["BK"]&&!res["js_code"]){res["js_code"]="app,"+LoginConfig.userId}_this.loginWith(res,suc,fail)})};LoginService.loginWith=function(res,success,fail){var _this=this;var params={game_id:LoginConfig.gameId,game_app_id:LoginConfig.gameId,version:LoginConfig.version,release:LoginConfig.release,is_config:LoginConfig.requestConfig};for(var key in res){params[key]=res[key]}params["user_token"]=this.token||"";params=LoginConfig.makeLoginParamsHandler(params);_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__["default"].startTrackTime("l");_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showLoading("",false);_core_network_Request__WEBPACK_IMPORTED_MODULE_3__["default"].POST("user_login",params,function(res){_this.isLogined=true;_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__["default"].stopTrackTime("l");_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__["default"].uploadLoginCostTime();_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].loginData=res;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].user=res;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].config=res.config_list;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].gold.value=_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].user.gold=res.member_gold;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].rmb.value=_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].user.rmb=res.member_rmb;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].integral.value=_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].user.integral=res.member_integral;var token=res.token;_core_network_Request__WEBPACK_IMPORTED_MODULE_3__["RequestConfig"].token=_this.token=token;localStorage.setItem(USER_TOKEN_KEY,token);localStorage.setItem(LAST_GET_USERINFO_TIME_KEY,Date.now()+"");_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].hideLoading();_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].refreshUserInfo();_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_4__["default"].postNotification(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_4__["NotificationName"].LoginSuccess);success&&success(res)},function(msg,code){if(code==2004){_core_network_Request__WEBPACK_IMPORTED_MODULE_3__["RequestConfig"].token="";_this.token="";_this.loginWith(res,success,fail)}else{_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].hideLoading();_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showModal("登录失败",msg)}})};LoginService.isAuthed=false;LoginService.isLogined=false;LoginService.lastGetUserInfoTime=Number(localStorage.getItem(LAST_GET_USERINFO_TIME_KEY)||"");LoginService.token=localStorage.getItem(USER_TOKEN_KEY)||"";return LoginService}();__webpack_exports__["default"]=LoginService},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _utils_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _core_Observer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13);var _core_network_Request__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);var _PaoYa__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1);var DataCenter=function(){function DataCenter(){}DataCenter.findLadderById=function(id){var result=this.loginData.config_list.game.ladder_config.filter(function(item){return item.id==id});return result[0]};DataCenter.makeLadderIconById=function(id){var ladder="";var ladderItem=this.findLadderById(id);if(ladderItem){ladder=_utils_utils__WEBPACK_IMPORTED_MODULE_0__["default"].makeIcon(ladderItem.icon)}return ladder};DataCenter.formatPrize=function(prize){var allPrize=prize.split(",");if(allPrize.length==0){return}var prizes=[];allPrize.forEach(function(item,index){var prizeInfo=item.split("-");if(prizeInfo&&prizeInfo.length==2){prizes.push({type:prizeInfo[0],value:prizeInfo[1]})}});return prizes};DataCenter.refreshUserInfo=function(){var _this=this;if(!_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].lifeCircleMonitor.inForeground)return;_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["default"].GET("update_chips",{},function(res){if(res.pao_gold!=undefined){_this.gold.value=res.pao_gold;_this.user.gold=res.pao_gold}if(res.rmb!=undefined){_this.rmb.value=res.rmb;_this.user.rmb=res.rmb}if(res.integral!=undefined){_this.integral.value=res.integral;_this.user.integral=res.integral}},function(res){console.warn("更新用户信息失败")})};DataCenter.CDNURL="https://xgamejuedixiaomie.goxiaochengxu.cn/";DataCenter.RESURL="https://xgamejuedixiaomie.goxiaochengxu.cn/";DataCenter.showBannerAdWhenDialogPopup=true;DataCenter.gold=new _core_Observer__WEBPACK_IMPORTED_MODULE_1__["default"];DataCenter.rmb=new _core_Observer__WEBPACK_IMPORTED_MODULE_1__["default"];DataCenter.integral=new _core_Observer__WEBPACK_IMPORTED_MODULE_1__["default"];return DataCenter}();__webpack_exports__["default"]=DataCenter},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _game_DataCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var _game_enums__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12);var Utils=function(){function Utils(){}Utils.makeImagesWithFormat=function(format,start,end){var images=[];for(var i=start;i<end;i++){images.push(format.replace("%i",String(i)))}return images};Utils.toQueryString=function(params){var items=[],queryStr="";for(var key in params){items.push(key+"="+params[key])}if(items.length){queryStr=items.join("&")}return queryStr};Utils.makeGenderIcon=function(gender){var icon="local/common/gay-white.png";if(gender=="男"){icon="local/common/boy-white.png"}else if(gender=="女"){icon="local/common/girl-white.png"}return icon};Utils.findUserByID=function(users,id){var result=users.filter(function(user,index){return user.user_id&&user.user_id==id});if(result.length){return result[0]}console.error("");return null};Utils.makeRoundRectPath=function(width,height,r,corner){var path=[];if(corner&_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerTopLeft){path.push(["moveTo",r,0])}else{path.push(["moveTo",0,0])}if(corner&_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerTopRight){path.push(["lineTo",width-r,0]);path.push(["arcTo",width,0,width,r,r])}else{path.push(["lineTo",width,0])}if(corner&_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerBottomRight){path.push(["lineTo",width,height-r]);path.push(["arcTo",width,height,width-r,height,r])}else{path.push(["lineTo",width,height])}if(corner&_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerBottomLeft){path.push(["lineTo",r,height]);path.push(["arcTo",0,height,0,height-r,r])}else{path.push(["lineTo",0,height])}if(corner&_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerTopLeft){path.push(["lineTo",0,r]);path.push(["arcTo",0,0,r,0,r])}else{path.push(["lineTo",0,0])}path.push(["closePath"]);return path};Utils.makeAllCornerRoundRectPath=function(w,h,r){return this.makeRoundRectPath(w,h,r,_game_enums__WEBPACK_IMPORTED_MODULE_1__["RectCorner"].RectCornerAllCorners)};Utils.formatName=function(name,length){if(length===void 0){length=10}var r=/[^\x00-\xff]/g;if(name.replace(r,"mm").length<=length){return name+""}var m=Math.floor(length/2);for(var i=m;i<name.length;i++){if(name.substring(0,i).replace(r,"mm").length>=length){return name.substring(0,i)+"..."}}return name+""};Utils.makeIcon=function(icon,width){if(width===void 0){width=96}if(icon==""){return"local/common/avstar.png"}if(icon.indexOf("Game")==0){if(window["BK"]){return icon}else{return""}}if(icon.indexOf("http")===0){var items=icon.split("/")||[];if(items.length>1){var str=items[items.length-1];if(str==="0"){items[items.length-1]=width>100?"132":"96"}return items.join("/")}return icon+""}else{if(!_game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].CDNURL){console.error("you must assign value to [PaoYa.DataCenter.CDNURL]");return}return _game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].CDNURL+icon+"?imageView2/0/w/"+width}};Utils.makeResourceURL=function(url){if(url==""){return"local/common/avstar.png"}if(url.indexOf("https")===0){return url+""}else{if(!_game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].CDNURL){console.error("you must assign value to [PaoYa.DataCenter.CDNURL]");return}return _game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].CDNURL+url}};Utils.measureWidth=function(text){var measureResult=Laya.Utils.measureText(text,"Arial");return measureResult.width};return Utils}();__webpack_exports__["default"]=Utils},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"PrizeType",function(){return PrizeType});__webpack_require__.d(__webpack_exports__,"ShareType",function(){return ShareType});__webpack_require__.d(__webpack_exports__,"RectCorner",function(){return RectCorner});__webpack_require__.d(__webpack_exports__,"GameEntryType",function(){return GameEntryType});__webpack_require__.d(__webpack_exports__,"SocketURLType",function(){return SocketURLType});__webpack_require__.d(__webpack_exports__,"RankingType",function(){return RankingType});var PrizeType;(function(PrizeType){PrizeType[PrizeType["Gold"]=1]="Gold";PrizeType[PrizeType["Money"]=2]="Money"})(PrizeType||(PrizeType={}));var ShareType;(function(ShareType){ShareType[ShareType["InviteFriend"]=1]="InviteFriend";ShareType[ShareType["GroupPK"]=2]="GroupPK";ShareType[ShareType["GroupRank"]=3]="GroupRank"})(ShareType||(ShareType={}));var RectCorner;(function(RectCorner){RectCorner[RectCorner["RectCornerTopLeft"]=1]="RectCornerTopLeft";RectCorner[RectCorner["RectCornerTopRight"]=2]="RectCornerTopRight";RectCorner[RectCorner["RectCornerBottomLeft"]=4]="RectCornerBottomLeft";RectCorner[RectCorner["RectCornerBottomRight"]=8]="RectCornerBottomRight";RectCorner[RectCorner["RectCornerAllCorners"]=15]="RectCornerAllCorners"})(RectCorner||(RectCorner={}));var GameEntryType;(function(GameEntryType){GameEntryType[GameEntryType["Friend"]=1]="Friend";GameEntryType[GameEntryType["Match"]=2]="Match";GameEntryType[GameEntryType["Ladder"]=3]="Ladder";GameEntryType[GameEntryType["Arena"]=4]="Arena";GameEntryType[GameEntryType["Full"]=5]="Full"})(GameEntryType||(GameEntryType={}));var SocketURLType;(function(SocketURLType){SocketURLType["TIMING"]="timing_url";SocketURLType["GAME"]="game_url"})(SocketURLType||(SocketURLType={}));var RankingType;(function(RankingType){RankingType[RankingType["Score"]=1]="Score";RankingType[RankingType["Ladder"]=2]="Ladder";RankingType[RankingType["WIN"]=8]="WIN"})(RankingType||(RankingType={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Observer=function(_super){__extends(Observer,_super);function Observer(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(Observer.prototype,"value",{get:function(){return this._value},set:function(newValue){this._value=newValue;this.event(Laya.Event.CHANGED,newValue)},enumerable:true,configurable:true});Observer.prototype.addObserver=function(caller,method){method.call(caller,this._value);this.on(Laya.Event.CHANGED,caller,method)};Observer.prototype.removeObserver=function(caller,method){this.off(Laya.Event.CHANGED,caller,method)};return Observer}(Laya.EventDispatcher);__webpack_exports__["default"]=Observer},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var Toast=function(){function Toast(){}Toast.show=function(title,icon,image,duration){if(image===void 0){image=null}if(duration===void 0){duration=1500}var params={title:title,icon:icon,image:image,duration:duration,mask:false,success:function(){},fail:function(){}};py.showToast(params)};Toast.hide=function(){py.hideToast()};Toast.showSuccess=function(title,duration){if(duration===void 0){duration=1500}this.show(title,null,"https://res.xingqiu123.com/wxremote/game/common/success.png",duration)};Toast.showError=function(title,duration){if(duration===void 0){duration=1500}this.show(title,null,"https://res.xingqiu123.com/wxremote/game/common/error.png",duration)};Toast.showWarn=function(title,duration){if(duration===void 0){duration=1500}this.show(title,null,"https://res.xingqiu123.com/wxremote/game/common/warning.png",duration)};Toast.showImage=function(image,duration){if(duration===void 0){duration=1500}this.show(null,null,image,duration)};Toast.showLoading=function(title,mask){if(title===void 0){title=""}if(mask===void 0){mask=true}py.showLoading({title:title,mask:mask,success:function(){},fail:function(){}})};Toast.hideLoading=function(){py.hideLoading()};Toast.showModal=function(title,content,confirmText,confirmCallback,cancelText,cancelCallback){if(title===void 0){title="提示"}if(content===void 0){content=""}if(confirmText===void 0){confirmText="知道了"}if(confirmCallback===void 0){confirmCallback=null}if(cancelText===void 0){cancelText=""}if(cancelCallback===void 0){cancelCallback=null}var params={title:title,content:content,showCancel:cancelText?true:false,cancelColor:"#000000",confirmColor:"#3cc51f",cancelText:cancelText,confirmText:confirmText,success:function(res){if(res.confirm){confirmCallback&&confirmCallback()}if(res.cancel){cancelCallback&&cancelCallback()}},fail:function(){}};py.showModal(params)};return Toast}();__webpack_exports__["default"]=Toast},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _export__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var RewardedVideoAd=function(_super){__extends(RewardedVideoAd,_super);function RewardedVideoAd(params){var _this_1=_super.call(this)||this;_this_1.isLoaded=false;_this_1.createAd(params);return _this_1}RewardedVideoAd.prototype.createAd=function(params){var _this=this;var videoAd=py.createRewardedVideoAd({adUnitId:params.adUnitId});videoAd.onLoad(function(res){_this.isLoaded=true;_this.event(RewardedVideoAd.LOAD,res)});videoAd.onError(function(res){_this.isLoaded=false;if(window["BK"]){res={errMsg:res.msg,errCode:res.code}}_this.event(RewardedVideoAd.ERROR,res)});videoAd.onClose(function(res){_this.isLoaded=false;if(!res){res={isEnded:true}}_this.event(RewardedVideoAd.CLOSE,res);_export__WEBPACK_IMPORTED_MODULE_0__["SoundManager"].onAudioInterruptionEnd()});this.videoAd=videoAd};RewardedVideoAd.prototype.show=function(){if(window["BK"]){this.videoAd.show()}else{if(this.isLoaded){this.videoAd.show()}else{this.videoAd.load();this.once(RewardedVideoAd.LOAD,this,function(){this.videoAd.show()})}}};RewardedVideoAd.show=function(params){if(window["wx"]&&!_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].adUnitId){console.error("请在Main中设置adUnitId之后再观看广告");return}if(!this.ad){this.ad=new RewardedVideoAd({adUnitId:_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].adUnitId})}var ad=this.ad;ad.offAllCaller(this);ad.on(this.LOAD,this,params.onLoad);ad.on(this.ERROR,this,params.onError);ad.on(this.CLOSE,this,params.onClose);_export__WEBPACK_IMPORTED_MODULE_0__["SoundManager"].onAudioInterruptionBegin();ad.show()};RewardedVideoAd.LOAD="load_ad";RewardedVideoAd.ERROR="error_ad";RewardedVideoAd.CLOSE="close_ad";RewardedVideoAd.ad=null;return RewardedVideoAd}(Laya.EventDispatcher);__webpack_exports__["default"]=RewardedVideoAd},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _export__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var BannerAd=function(_super){__extends(BannerAd,_super);function BannerAd(params){if(params===void 0){params={}}var _this_1=_super.call(this)||this;params.adUnitId=params.adUnitId||_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].bannerUnitId;params.viewId=params.qqViewId||_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].qqViewId;if(!params.style){var style={};if(window["wx"]){style.top=style.left=0;style.width=Laya.Browser.clientWidth||300}else if(window["BK"]){style.x=0;style.y=0}params.style=style}var ad=py.createBannerAd(params),_this=_this_1;ad.onLoad(function(res){_this.event(BannerAd.LOAD,res)});ad.onError(function(res){_this.event(BannerAd.ERROR,res)});if(window["wx"]){var screenWidth_1=Laya.Browser.clientWidth,screenHeight_1=Laya.Browser.clientHeight;ad.onResize(function(res){var bannerAd=ad["bannerAd"];bannerAd.style.left=(screenWidth_1-res.width)/2;if(!params.style.top){bannerAd.style.top=screenHeight_1-res.height}_this.event(BannerAd.RESIZE,[bannerAd,res,screenWidth_1,screenHeight_1])})}_this_1.ad=ad;return _this_1}BannerAd.prototype.show=function(){this.ad.show()};BannerAd.prototype.hide=function(){this.ad.hide()};BannerAd.prototype.destroy=function(){this.ad.destroy();this.offAllCaller(BannerAd)};BannerAd.show=function(params){var ad=new BannerAd(params);ad.on(BannerAd.LOAD,this,params.onLoad);ad.on(BannerAd.ERROR,this,params.onError);ad.on(BannerAd.RESIZE,this,params.onResize);ad.show();return ad};BannerAd.hide=function(bannerAd){bannerAd.hide()};BannerAd.destroy=function(bannerAd){bannerAd.destroy()};BannerAd.LOAD="load_ad";BannerAd.ERROR="error_ad";BannerAd.RESIZE="re-size";return BannerAd}(Laya.EventDispatcher);__webpack_exports__["default"]=BannerAd},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var View=function(_super){__extends(View,_super);function View(){var _this=_super.call(this)||this;_this.params=null;_this.sceneName="";_this.setupJSONView();_this.createJSONView();_this._addClickListener();return _this}View.prototype.setupJSONView=function(){};View.prototype.createJSONView=function(){var json=this.constructor["JSONView"];json&&this.createView(json)};View.prototype._addClickListener=function(){var prototype=View.prototype;if(this.onClick!==prototype.onClick){this.on(Laya.Event.CLICK,this,this._onClick)}};View.prototype._onClick=function(e){this.onClick(e)};View.prototype.onClick=function(e){};View.prototype._onAppear=function(){this.onAppear()};View.prototype.onAppear=function(){};View.prototype._onDisappear=function(){this.onDisappear()};View.prototype.onDisappear=function(){};View.prototype._onAdded=function(){_super.prototype._onAdded.call(this);this.onAdded()};View.prototype._onRemoved=function(){_super.prototype._onRemoved.call(this);this.onRemoved()};View.prototype.onAdded=function(){};View.prototype.onRemoved=function(){};View.prototype.open=function(closeOther,param){if(closeOther===void 0){closeOther=false}this.params=param;_super.prototype.open.call(this,closeOther,param)};return View}(Laya.View);__webpack_exports__["default"]=View},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _export__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Dialog=function(_super){__extends(Dialog,_super);function Dialog(){var _this=_super.call(this)||this;_this.showBannerAdWhenDialogPopup=true;_this.createJSONView();return _this}Dialog.prototype.createJSONView=function(){var json=this.constructor["JSONView"];json&&this.createView(json)};Dialog.prototype._onAdded=function(){_super.prototype._onAdded.call(this);this.onAdded();this._showBannerAd()};Dialog.prototype.onAdded=function(){};Dialog.prototype._onRemoved=function(){_super.prototype._onRemoved.call(this);this.onRemoved();this._hideBannerAd()};Dialog.prototype.onRemoved=function(){};Dialog.prototype._showBannerAd=function(){if(this.showBannerAdWhenDialogPopup&&_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].showBannerAdWhenDialogPopup){this["bannerAd"]=_wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_1__["default"].show({})}};Dialog.prototype._hideBannerAd=function(){if(this["bannerAd"]){var bannerAd=this["bannerAd"];_wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_1__["default"].hide(bannerAd);_wx_ad_bannerAd__WEBPACK_IMPORTED_MODULE_1__["default"].destroy(bannerAd)}};return Dialog}(Laya.Dialog);__webpack_exports__["default"]=Dialog},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _game_DataCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var commonScenes={};var Navigator=function(_super){__extends(Navigator,_super);function Navigator(){var _this=_super.call(this)||this;_this.scenes=[];return _this}Navigator.prototype.popup=function(sceneName,params,complete,progress,closeOther){if(closeOther===void 0){closeOther=true}Laya.Scene.load(this.makeDialogName(sceneName),Laya.Handler.create(null,function(dialog){dialog.isModal=true;dialog.isShowEffect=false;dialog["params"]=params;dialog.open(closeOther,params);complete&&complete.runWith(dialog)}),progress)};Navigator.prototype.push=function(sceneName,params,resURL,complete,progress,prepare){this._open(sceneName,params,resURL,complete,progress,prepare,true)};Navigator.prototype.pop=function(){_game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].refreshUserInfo();this.scenes.pop().close("pop");var scene=this.scenes[this.scenes.length-1];this.activeScene(scene)};Navigator.prototype.popToLastScene=function(sceneName){};Navigator.prototype.findSceneByName=function(sceneName){var desScene=null;for(var i=this.scenes.length-1;i>=0;i--){var scene=this.scenes[i];if(scene.sceneName.indexOf(sceneName)!=-1){desScene=scene;break}}return desScene};Navigator.prototype.popToScene=function(sceneName){_game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].refreshUserInfo();for(var i=this.scenes.length;i--;i>=0){var scene=this.scenes[i];if(scene.sceneName===sceneName){this.activeScene(scene);break}else{this.scenes.pop().close("pop")}}};Navigator.prototype.activeScene=function(scene){!scene.visible&&(scene.visible=true);this.visibleScene=scene;this._onAppear()};Navigator.prototype.popToRootScene=function(){_game_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].refreshUserInfo();if(this.scenes.length==1)return;while(this.scenes.length>1){this.scenes.pop().close("pop")}var scene=this.scenes[this.scenes.length-1];this.activeScene(scene)};Navigator.prototype.present=function(sceneName,params,resURL,complete,progress,prepare){this._open(sceneName,params,resURL,complete,progress,prepare,false)};Navigator.prototype.dismiss=function(){this.pop()};Navigator.prototype.replace=function(sceneName,params){var scene;for(var i=this.scenes.length-1;i>=0;i--){scene=this.scenes[i];scene.destroy();this.scenes.pop();if(scene.sceneName==sceneName){this.visibleScene=null;this.push(sceneName,params);return}}console.error("错误的:"+sceneName)};Navigator.prototype.replaceSceneWith=function(oldScene,newSceneName,params){var scene;var index=this.scenes.indexOf(oldScene);if(index<0){console.error("指定的scene未包含在navigator中");return}for(var i=this.scenes.length-1;i>=index;i--){scene=this.scenes[i];scene.destroy();this.scenes.pop()}this.visibleScene=null;this.push(newSceneName,params)};Navigator.prototype.visibleSceneIs=function(sceneName){return this.visibleScene.sceneName.indexOf(sceneName)>-1};Navigator.prototype.makeSceneName=function(name){if(commonScenes[name]){return"scenes/"+commonScenes[name]+".scene"}if(Navigator.scenesMap[name]){return Navigator.scenesMap[name]+".scene"}return"gameScenes/"+name+".scene"};Navigator.prototype.makeDialogName=function(name){if(name.indexOf("/")==0){return"gameScenes"+name+".scene"}return"scenes/dialog/"+name+".scene"};Navigator.prototype._open=function(sceneName,params,resURL,complete,progress,prepare,hidePre){if(hidePre===void 0){hidePre=true}var urls=[];if(resURL instanceof Array){urls=urls.concat(resURL)}else if(typeof resURL=="string"){urls.push(resURL)}else if(resURL instanceof Laya.Handler){complete=resURL;progress=complete;prepare=progress}urls.push(this.makeSceneName(sceneName));Laya.Scene["_prepareHandler"]=prepare;Laya.Scene.open(urls,false,params,Laya.Handler.create(this,function(scene){if(this.scenes.length>0){var preScene=this.scenes[this.scenes.length-1];preScene.visible=!hidePre;this._onDisappear()}scene.autoDestroyAtClosed=true;scene.sceneName=sceneName;this.visibleScene=scene;this.scenes.push(scene);this._onLoad();this._onAppear();complete&&complete.runWith(scene)}),progress)};Navigator.setupLoadingPage=function(isFirstScene,cb){var url=isFirstScene?"scenes/LoadingScene.scene":"scenes/LoadWaitingView.scene";var page=Laya.Scene["_loadPage"];if(page&&page.url==url)return;Laya.Scene.load(url,Laya.Handler.create(this,function(scene){var stage=Laya.stage;var screenWidth=Laya.Browser.width;var screenHeight=Laya.Browser.height;var width=stage.designWidth;var height=stage.designHeight;var scaleX=screenWidth/width;var y=(screenHeight-height*scaleX>>1)/scaleX;scene.y=Math.floor(y);Laya.Scene.setLoadingPage(scene);cb&&cb()}))};Navigator.adjustViewPosition=function(view){var stage=Laya.stage;var screenWidth=Laya.Browser.width;var screenHeight=Laya.Browser.height;var width=stage.designWidth;var height=stage.designHeight;var scaleX=screenWidth/width;var y=(screenHeight-height*scaleX>>1)/scaleX;view.y=Math.floor(y)};Navigator.prototype._onReceiveMessage=function(cmd,value,code,message){this._dispatchEvent("_onReceiveMessage",cmd,value)};Navigator.prototype._onReceiveSocketError=function(cmd,code,message){this._dispatchEvent("_onReceiveMessage",cmd,code,message)};Navigator.prototype._onReceiveNotification=function(name,params){this._dispatchEvent("_onReceiveNotification",name,params)};Navigator.prototype._onReceiveSocketClose=function(){if(!this.visibleScene)return;var components=this.visibleScene["_components"]||[],shareMsg=null;components.forEach(function(item){if(item.onSocketClose){item.onSocketClose()}})};Navigator.prototype._onReceiveNetworkChange=function(res){this._dispatchEvent("onNetworkChange",res)};Navigator.prototype.onShareAppMessage=function(){if(!this.visibleScene)return;var components=this.visibleScene["_components"]||[],shareMsg=null;components.forEach(function(item){if(item.onShareAppMessage){shareMsg=item.onShareAppMessage()}});return shareMsg};Navigator.prototype._onShow=function(res){this._dispatchEvent("_onShow",res)};Navigator.prototype._onHide=function(res){this._dispatchEvent("_onHide",res)};Navigator.prototype._onLoad=function(){this._dispatchEvent("_onLoad")};Navigator.prototype._onAppear=function(){this._dispatchEvent("_onAppear")};Navigator.prototype._onDisappear=function(){this._dispatchEvent("_onDisappear")};Navigator.prototype._dispatchEvent=function(method,p1,p2,p3,p4,p5){if(!this.visibleScene)return;this.visibleScene.dispatchLifeCycleEvent(method,p1,p2,p3,p4,p5)};Navigator.scenesMap={};return Navigator}(Laya.EventDispatcher);__webpack_exports__["default"]=Navigator},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"ClientConfig",function(){return ClientConfig});var _Socket__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);var _wx_Toast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14);var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5);var _PaoYa__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var ClientConfig=function(){function ClientConfig(){}ClientConfig.watchDogTime=5;ClientConfig.maxRetryTime=3;return ClientConfig}();var Client=function(_super){__extends(Client,_super);function Client(url){if(url===void 0){url=null}var _this=_super.call(this,url)||this;_this.msgsSending=[];_this.msgsSent=[];_this.map={};return _this}Client.prototype.sendMessage=function(cmd,params){if(!params.game_id&&_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].game){params.game_id=_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].game.gameId}params.command=cmd;var time=(new Date).valueOf();params.m_id=time;if(this.map[time]==undefined){this.map[time]=0}else{this.map[time]=this.map[time]++}var msg=JSON.stringify(params);if(this.connected){if(cmd!=="heartbeat"){console.log("S >>> | "+cmd+" | "+JSON.stringify(params))}this.send(msg);var shouldCheck=true;var cmds=Client.ignoreCmds;for(var i=0;i<cmds.length;i++){var command=cmds[i];if(cmd===command){shouldCheck=false;break}}cmds=Client._ignoreCmds;for(var i=0;i<cmds.length;i++){var command=cmds[i];if(cmd===command){shouldCheck=false;break}}if(shouldCheck){this.msgsSent.push(msg)}}else{this.msgsSending.push({cmd:cmd,params:params});if(!this.isReconnecting&&this.url){this._startReconnect()}console.warn("缓存socket命令，等待连接成功后再次发送")}};Client.prototype.handleMessage=function(msg){_super.prototype.handleMessage.call(this,msg);var obj=JSON.parse(msg);var cmd=obj.command;var value=obj.value;var code=obj.code;var message=obj.message||"请求出错";if(cmd!=="heartbeat"){console.log("S <<< | "+cmd+" | "+JSON.stringify(value))}if(cmd==Client.LOGIN){this.onLogin()}this.event(cmd,[value,code,message]);this.dispatchResultToNavigator(cmd,value,code,message,obj.errorcode);this.removeMsg(obj)};Client.prototype.dispatchResultToNavigator=function(cmd,value,code,message,errorcode){if(code!=200){_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].navigator._onReceiveSocketError(cmd,errorcode,message);console.error("S <<< | "+cmd+" | "+errorcode+" | "+message)}else{if(Client.ignorePathThroughCmds.indexOf(cmd)<0){_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].navigator._onReceiveMessage(cmd,value)}}};Client.prototype.onLogin=function(){var _this=this;console.log("WebSocket登录成功");console.log("S: | sending | msgs: "+this.msgsSending.length+"个");this.msgsSending.forEach(function(msg){_this.sendMessage(msg.cmd,msg.params)});this.msgsSending.length=0;this.startWatchDog();this.startHeartBeat()};Client.prototype.startWatchDog=function(){Laya.timer.loop(ClientConfig.watchDogTime,this,this.checkCmd)};Client.prototype.stopWatchDog=function(){this.msgsSent.length=0;Laya.timer.clear(this,this.checkCmd)};Client.prototype.checkCmd=function(){var _this=this;var currentTimestamp=(new Date).valueOf();this.msgsSent.forEach(function(item,index){var msg=JSON.parse(item);if(msg.m_id&&currentTimestamp-msg.m_id>5*1e3){if(msg.retryTime<ClientConfig.maxRetryTime){_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__["default"].track(_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_2__["DataTrackType"].SocketRetry,{c:msg.command,t:msg.retryTime});_this.sendMessage(msg.command,msg)}else{_this.event(msg.command,[{},-1,"请求超时"]);console.error("命令 "+msg.command+" 请求超时，如有误报，请在Main中添加ignoreCmds参数")}_this.removeMsg(msg)}})};Client.prototype.removeMsg=function(msg){for(var i=0;i<this.msgsSent.length;i++){var item=JSON.parse(this.msgsSent[i]);if(item.m_id==msg.m_id){this.msgsSent.splice(i,1);delete this.map[item.m_id]}}};Client.prototype._onClose=function(e){_super.prototype._onClose.call(this,e);_PaoYa__WEBPACK_IMPORTED_MODULE_3__["default"].navigator._onReceiveSocketClose();this.stopHeartBeat();this.stopWatchDog()};Client.prototype.startHeartBeat=function(){Laya.timer.loop(15e3,this,this.handleHeartBeat)};Client.prototype.stopHeartBeat=function(){Laya.timer.clear(this,this.handleHeartBeat)};Client.prototype.handleHeartBeat=function(){this.sendMessage(Client.HEART_BEAT,{})};Client.prototype.onReconnecting=function(cur,total){_super.prototype.onReconnecting.call(this,cur,total);_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showLoading("连接中("+cur+"/"+total+")",true)};Client.prototype.onReconnectStart=function(){_super.prototype.onReconnectStart.call(this);this.stopHeartBeat();_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showLoading("正在连接...")};Client.prototype.onReconnectEnd=function(){_super.prototype.onReconnectEnd.call(this);_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].hideLoading();_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showSuccess("连接成功",1500)};Client.prototype.onReconnectFail=function(){_super.prototype.onReconnectFail.call(this);_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].hideLoading();_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showSuccess("连接失败",1500)};Client.ignoreCmds=[];Client._ignoreCmds=["betpk","startmatch","joinmatch","cancelmatch","matchagain","cancelagain","promotionenroll","cancelenroll","laddermatch","cancelladdermatch","demandpk","matchreject","sharestartgame","wheel_index","qq_join_room","receive_invite"];Client.ignorePathThroughCmds=["heartbeat"];Client.HEART_BEAT="heartbeat";Client.DISCONNECT="disconnect";Client.LEAVE_ROOM="leave_room";Client.LOGIN="login";Client.MATCH_SUCCESS="matchsuccess";Client.MATCH_FAIL="matchfail";Client.MATCH_JOIN="joinmatch";Client.MATCH_CANCEL="cancelmatch";Client.LADDER_MATCH_JOIN="laddermatch";Client.LADDER_MATCH_CANCEL="cancelladdermatch";Client.GAME_START_MATCH="startmatch";Client.GAME_START_GAME="startpkgame";Client.GAME_START_PK="startpk";Client.GAME_BET="betpk";Client.GAME_END_PK="endpk";Client.GAME_END_PKGAME="endpkgame";Client.AGIAN_SEND="matchagain";Client.AGAIN_REJECT="matchreject";Client.AGAIN_CANCAL="cancelagain";Client.CHAMPIONSHIP_JION="promotionenroll";Client.CHAMPIONSHIP_CANCEL="cancelenroll";Client.CHAMPIONSHIP_UPDATE_ROOM_COUNT="updateCount";Client.CHAMPIONSHIP_UPDATE_TOTAL_COUNT="updatecurUserCount";Client.SHARE_START_GAME="sharestartgame";Client.SHARE_INVITE_FRIEND="invite_friend";Client.SHARE_RECEIVE_INVITE="receive_invite";Client.GROUP_JOIN_ROOM="groupjoinroom";Client.GROUP_ROOM_STATUS="grouproomStatus";return Client}(_Socket__WEBPACK_IMPORTED_MODULE_0__["default"]);__webpack_exports__["default"]=Client},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"SocketConfig",function(){return SocketConfig});var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _PaoYa__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SocketConfig=function(){function SocketConfig(){}SocketConfig.zone="";return SocketConfig}();var Socket=function(_super){__extends(Socket,_super);function Socket(url){var _this=_super.call(this)||this;_this.url=url;_this.isReconnecting=false;_this.reconnectTimes=0;return _this}Object.defineProperty(Socket.prototype,"canReconnect",{get:function(){var networkMonitor=_PaoYa__WEBPACK_IMPORTED_MODULE_1__["default"].networkMonitor;var lifeCircleMonitor=_PaoYa__WEBPACK_IMPORTED_MODULE_1__["default"].lifeCircleMonitor;console.log("SOCKET是否连接:    "+(this.connected?"是":"否"));console.log("是否在前台:        "+(lifeCircleMonitor.inForeground?"是":"否"));console.log("网络是否连接:      "+(networkMonitor.isConnected?"是":"否"));console.log("是否正在重连:      "+(this.isReconnecting?"是":"否"));return!this.connected&&lifeCircleMonitor.inForeground&&networkMonitor.isConnected&&!this.isReconnecting},enumerable:true,configurable:true});Socket.prototype.addObserver=function(){};Socket.prototype.changeUrl=function(url){var _this=this;if(url!=this.url){this.url=url;if(this.isReconnecting){this._stopReconnect()}if(this.connected){this["_connected"]=false;this.close()}Laya.timer.once(500,this,function(){_this.connect()})}};Socket.prototype._onOpen=function(e){_super.prototype._onOpen.call(this,e);console.log("S | OPEN: | "+JSON.stringify(e));if(this.isReconnecting){this._stopReconnect();this.onReconnectEnd()}};Socket.prototype._onClose=function(e){_super.prototype._onClose.call(this,e);console.log("S | CLOSE: | "+JSON.stringify(e))};Socket.prototype._onMessage=function(msg){_super.prototype._onMessage.call(this,msg);if(!msg||!msg.data)return;var data=msg.data;this.handleMessage(data)};Socket.prototype._onError=function(e){_super.prototype._onError.call(this,e);console.log("S | Error: | "+JSON.stringify(e))};Socket.prototype.handleMessage=function(msg){};Socket.prototype.connect=function(){if(this.isReconnecting||this.connected)return;this.connectByUrl(this.url)};Socket.prototype.connectByUrl=function(url){_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_0__["default"].startSocketTime();this.url=url;_super.prototype.connectByUrl.call(this,url)};Socket.prototype.startWatchDog=function(){Laya.timer.loop(5e3,this,this.handleWatchDog)};Socket.prototype.handleWatchDog=function(){if(this.connected){this.stopWatchDog()}else{this._startReconnect()}};Socket.prototype.stopWatchDog=function(){Laya.timer.clear(this,this.handleWatchDog)};Socket.prototype._startReconnect=function(interval){if(interval===void 0){interval=Socket.reconnectConfig.interval}if(!this.canReconnect)return;this.reconnectTimes=0;this._reconnect();this.onReconnectStart();this.isReconnecting=true;Laya.timer.loop(interval*1e3,this,this._reconnect)};Socket.prototype._stopReconnect=function(){if(!this.isReconnecting)return;this.isReconnecting=false;this.reconnectTimes=0;Laya.timer.clear(this,this._reconnect)};Socket.prototype._reconnect=function(){if(this.connected){this._stopReconnect();this.onReconnectEnd();return}var config=Socket.reconnectConfig;if(this.reconnectTimes<config.total){this.connect();this.reconnectTimes++;this.onReconnecting(this.reconnectTimes,config.total);if(this.reconnectTimes>config.total/2){Laya.timer.clear(this,this._reconnect);Laya.timer.loop(config.duration*1e3,this,this._reconnect)}}else{this._stopReconnect();this.onReconnectFail()}};Socket.prototype.onReconnecting=function(times,total){this.event(Socket.RECONNECT_PROGRESS,[times,total])};Socket.prototype.onReconnectStart=function(){this.event(Socket.RECONNECT_START,[this.reconnectTimes,Socket.reconnectConfig.total])};Socket.prototype.onReconnectEnd=function(){this.event(Socket.RECONNECT_END)};Socket.prototype.onReconnectFail=function(){this.event(Socket.RECONNECT_FAIL)};Socket.reconnectConfig={total:3,interval:3,duration:8};Socket.RECONNECT_START="socket.reconnect.start";Socket.RECONNECT_END="socket.reconnect.end";Socket.RECONNECT_FAIL="socket.reconnect.fail";Socket.RECONNECT_PROGRESS="socket.reconnect.progress";return Socket}(Laya.Socket);__webpack_exports__["default"]=Socket},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _game__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);var _wx_Toast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14);var _core_network_Request__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);var _wx_monitor_NetworkMonitor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26);var _wx_monitor_LifeCircleMonitor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27);var _core_network_Socket__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21);var _DataCenter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10);var _dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5);var _wx_manager_PayManager__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(28);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8);var _core_network_Client__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(20);var _enums__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(12);var _PaoYa__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1);var _service_LoginService__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(9);var _wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7);var _laya_sound__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(29);var _service_Loader__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(30);var _view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(25);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Main=function(_super){__extends(Main,_super);function Main(params){var _this_1=_super.call(this,params)||this;_this_1.params=params;if(!params.gameId){console.error("初始化时必须传入gameId")}if(!params.baseURL){console.error("初始化时必须传入baseURL")}if(!params.zone){console.error("初始化时必须传入zone")}_this_1.gameId=params.gameId;_this_1.params.rankingType=_this_1.params.rankingType||_enums__WEBPACK_IMPORTED_MODULE_11__["RankingType"].Score;if(_this_1.params.showBannerAdWhenDialogPopup!=undefined){_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].showBannerAdWhenDialogPopup=_this_1.params.showBannerAdWhenDialogPopup}_PaoYa__WEBPACK_IMPORTED_MODULE_12__["default"].game=_this_1;_core_network_Socket__WEBPACK_IMPORTED_MODULE_5__["SocketConfig"].zone=params.zone;_wx_manager_PayManager__WEBPACK_IMPORTED_MODULE_8__["default"].offerId=params.offerId;_this_1.init();return _this_1}Main.prototype.init=function(){_PaoYa__WEBPACK_IMPORTED_MODULE_12__["default"].networkMonitor=this.networkMonitor=new _wx_monitor_NetworkMonitor__WEBPACK_IMPORTED_MODULE_3__["default"];_PaoYa__WEBPACK_IMPORTED_MODULE_12__["default"].lifeCircleMonitor=this.lifeCircleMonitor=new _wx_monitor_LifeCircleMonitor__WEBPACK_IMPORTED_MODULE_4__["default"];this._addNotificationCenterListener();this._configHTTP();this._configLogin();this._configShareManager();this._configSoundManager();if(Laya.Browser.onMiniGame){_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_7__["default"].setup(this.params.mtaID,this.params.mtaEventID,this.launchOption)}this.setupOthers()};Main.prototype.loadRes=function(){var _this=this;var connectWebsocket=function(){_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].setTips("正在连接...");_this._initClient(function(){_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].setTips("准备就绪");_this.getLoadingScene(function(){_this.initRootScene(_this.launchOption,_this.isFirstLaunch);_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].hide()})},function(){_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showModal("提示","连接服务器失败","重试",function(){_this.socket.connect()})})};var login=function(suc){_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].setTips("正在登录...");_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["default"].login(suc,function(){_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showModal("提示","登录失败","重试",function(){login(suc)})})};var complete=function(){login(function(){_this.getLoadingScene(function(){_this.initRootScene(_this.launchOption,_this.isFirstLaunch);_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].hide()})})};_service_Loader__WEBPACK_IMPORTED_MODULE_16__["default"].preload(Laya.Handler.create(this,function(){if(_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].GAMEPREPARE){var prepare=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].GAMEPREPARE;if(typeof prepare=="function"){prepare();complete()}else if(typeof prepare=="object"){if(prepare["async"]){prepare["async"](function(){complete()})}else{prepare["sync"]();complete()}}}else{complete()}}),Laya.Handler.create(this,function(progress){_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_17__["default"].setProgress(progress)},null,false))};Main.prototype._addNotificationCenterListener=function(){_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["default"].on(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["NotificationName"].ApplicationShow,this,this._onShow);_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["default"].on(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["NotificationName"].ApplicationHide,this,this._onHide);_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["default"].on(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_9__["NotificationName"].NetworkChanged,this,this._handleNetworkChange)};Main.prototype._configHTTP=function(){_core_network_Client__WEBPACK_IMPORTED_MODULE_10__["default"].ignoreCmds=this.params.ignoreCmds||[];_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["RequestConfig"].baseURL=this.params.baseURL;if(this.launchOption&&this.launchOption.referrerInfo&&this.launchOption.referrerInfo.extraData){var referrerInfo=this.launchOption.referrerInfo,extraData=referrerInfo.extraData,token=extraData.token,baseURL=extraData.baseURL;baseURL&&(_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["RequestConfig"].baseURL=baseURL)}var _this=this;_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["RequestConfig"].makeParamsHandler=function(params){if(!params["user_token"]&&_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["RequestConfig"].token){params["user_token"]=_core_network_Request__WEBPACK_IMPORTED_MODULE_2__["RequestConfig"].token}if(!params["game_id"]&&_this.gameId){params["game_id"]=_this.gameId}return{wxparams:JSON.stringify(params)}}};Main.prototype._configLogin=function(){var params=this.params;_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["LoginConfig"].userId=params.userId;_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["LoginConfig"].gameId=params.gameId;_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["LoginConfig"].version=params.version;_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["LoginConfig"].release=params.release;var _this=this;_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["LoginConfig"].makeLoginParamsHandler=function(params){if(_this.launchOption&&_this.launchOption["query"]){params["share_id"]=_this.launchOption["query"]["id"]||0;params["share_type"]=_this.launchOption["query"]["type"]||0;params["launch_info"]=_this.launchOption||""}if(_this.launchOption&&_this.launchOption.referrerInfo&&_this.launchOption.referrerInfo.extraData){var extraData=_this.launchOption.referrerInfo.extraData;params["from_game_id"]=extraData.fid||0;params["from_game_id_type"]=extraData.jType||""}return params};if(this.launchOption&&this.launchOption.referrerInfo&&this.launchOption.referrerInfo.extraData){var referrerInfo=this.launchOption.referrerInfo,extraData=referrerInfo.extraData,token=extraData.token;token&&(_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["default"].token=token)}};Main.prototype._configShareManager=function(){_wx_manager_ShareManager__WEBPACK_IMPORTED_MODULE_14__["default"].makeQueryHandler=function(query){query.id=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].user.id;return query}};Main.prototype._configSoundManager=function(){var _this_1=this;py.onAudioInterruptionBegin(function(){console.log("Audio | interrupt | begin");if(window["wx"]){_this_1.lifeCircleMonitor.inForeground=false}_laya_sound__WEBPACK_IMPORTED_MODULE_15__["default"].onAudioInterruptionBegin()});py.onAudioInterruptionEnd(function(){console.log("Audio | interrupt | end");if(window["wx"]){_this_1.lifeCircleMonitor.inForeground=true}_laya_sound__WEBPACK_IMPORTED_MODULE_15__["default"].onAudioInterruptionEnd()})};Main.prototype._initClient=function(suc,fail){console.warn("初始化WebSocket");var url=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].loginData.game_url;if(!url){console.error("请验证game_url是否正确")}if(Laya.Render.isConchApp){url=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].loginData["app_game_url"]}var socket=_PaoYa__WEBPACK_IMPORTED_MODULE_12__["default"].socket=this.socket=new _core_network_Client__WEBPACK_IMPORTED_MODULE_10__["default"](url+this.params.zone);socket.on(Laya.Event.OPEN,this,function(){_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_7__["default"].stopSocketTime();var userId=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].user.id;if(!userId){console.error("user_id不存在，请检查错误")}_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_7__["default"].startSocketLogin();console.log("开始WebSocket登录");socket.sendMessage("login",{user_id:userId})});socket.once(_core_network_Client__WEBPACK_IMPORTED_MODULE_10__["default"].LOGIN,this,function(){Laya.timer.clear(this,timerHandler);_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].hideLoading();suc&&suc();_dataTrack_dataTrack__WEBPACK_IMPORTED_MODULE_7__["default"].stopSocketLogin()});_wx_Toast__WEBPACK_IMPORTED_MODULE_1__["default"].showLoading("",false);socket.connect();var timerHandler=function(){socket.close();fail&&fail()};Laya.timer.once(15e3,this,timerHandler)};Main.prototype._changeClientURL=function(type){if(type===void 0){type=_enums__WEBPACK_IMPORTED_MODULE_11__["SocketURLType"].GAME}var baseURL=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].loginData[type];if(Laya.Render.isConchApp){baseURL=_DataCenter__WEBPACK_IMPORTED_MODULE_6__["default"].loginData["app_"+type]}var url=baseURL+this.params.zone;if(url!=this.socket.url){console.warn("开始切换服务器地址，旧地址为"+this.socket.url+" | 新地址为"+url);this.socket.changeUrl(url)}};Main.prototype._onShow=function(res){if(!this.socket)return;this.isFirstLaunch=false;this.launchOption=res;var query=res.query;var type=query.type;var _this=this;var onShowHandler=function(){_this.initRootScene(_this.launchOption,_this.isFirstLaunch)};if(type==_enums__WEBPACK_IMPORTED_MODULE_11__["ShareType"].InviteFriend||type==_enums__WEBPACK_IMPORTED_MODULE_11__["ShareType"].GroupPK){_service_LoginService__WEBPACK_IMPORTED_MODULE_13__["default"].login(function(){_this._changeClientURL();onShowHandler()},null)}else{onShowHandler();this.socket._startReconnect()}this.navigator._onShow(res);this.onShow(res);_laya_sound__WEBPACK_IMPORTED_MODULE_15__["default"].onShow()};Main.prototype._onHide=function(res){if(!this.socket)return;this.navigator._onHide(res);this.onHide(res);_laya_sound__WEBPACK_IMPORTED_MODULE_15__["default"].onHide()};Main.prototype.onShow=function(res){};Main.prototype.onHide=function(res){};Main.prototype.getLoadingScene=function(cb){cb()};Main.prototype.setupOthers=function(){};Main.prototype._handleNetworkChange=function(res){this.navigator._onReceiveNetworkChange(res);this.handleNetworkChange(res)};Main.prototype.handleNetworkChange=function(res){};return Main}(_game__WEBPACK_IMPORTED_MODULE_0__["default"]);__webpack_exports__["default"]=Main},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _DataCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var _wx_manager_UpdateManager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24);var _PaoYa__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var _wx_Toast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14);var _core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19);var _view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Game=function(_super){__extends(Game,_super);function Game(params){var _this=_super.call(this)||this;_this.params=params;_this.gameId=1001;_this.isLogined=false;_this.isAuthed=false;_this.loadNetworkRes=false;_this.isFirstLaunch=true;_this.params.debug=_this.params.debug||false;_this.gameId=params.gameId;if(_this.isMiniGame){_this.loadNetworkRes=_this.params.loadNetworkRes==undefined?true:_this.params.loadNetworkRes}_this.initLaya();_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].RESURL="https://xgamejuedixiaomie.goxiaochengxu.cn/"+_this.gameId+"/";_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].adUnitId=params.adUnitId;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].bannerUnitId=params.bannerUnitId;_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].qqViewId=params.qqViewId||1003;_this.configNavigator();_this.enterMain();_this.initLaunchOption();_this.checkUpdate();Laya.timer.callLater(_this,_this.initPlatform);return _this}Object.defineProperty(Game.prototype,"isMiniGame",{get:function(){return py.isMiniGame()&&!Laya.Render.isConchApp},enumerable:true,configurable:true});Game.prototype.initLaya=function(){var width=this.params.width||750;var height=this.params.height||1334;var config=this.params;if(window["Laya3D"]){Laya3D.init(width,height)}else{Laya.init(width,height,config.webGL||Laya.WebGL)}Laya["Physics"]&&Laya["Physics"].enable();if(this.params.debug){config.showStat&&Laya.Stat.show();(config.showDebugTool||Laya.Utils.getQueryString("debug")=="true")&&Laya["DebugPanel"]&&Laya["DebugPanel"].enable();Laya["PhysicsDebugDraw"]&&Laya["PhysicsDebugDraw"].enable()}var stage=Laya.stage;var Stage=Laya.Stage;stage.scaleMode=config.scaleMode||Stage.SCALE_FIXED_WIDTH;stage.alignH=config.alignH||Stage.ALIGN_CENTER;stage.alignV=config.alignV||Stage.ALIGN_MIDDLE;if(config.portrait==undefined||config.portrait){stage.screenMode=Stage.SCREEN_VERTICAL}else{stage.screenMode=Stage.SCREEN_HORIZONTAL}stage.frameRate=Stage.FRAME_MOUSE;var sprite=new Laya.Sprite;var Browser=Laya.Browser;sprite.graphics.drawRect(0,0,Browser.width,Browser.height,"#000000");stage.addChild(sprite);this._setupResLoadConfig();Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,function(){_view_LaunchScreenView__WEBPACK_IMPORTED_MODULE_5__["default"].show();Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.loadRes))}),Laya.ResourceVersion.FILENAME_VERSION)};Game.prototype.initLaunchOption=function(){var launchOption=py.getLaunchOptionsSync();launchOption.referrerInfo=launchOption.referrerInfo||{extraData:{}};launchOption.referrerInfo.extraData=launchOption.referrerInfo.extraData||{};console.warn("LAUNCH | "+JSON.stringify(launchOption));this.launchOption=launchOption};Game.prototype.configNavigator=function(){_PaoYa__WEBPACK_IMPORTED_MODULE_2__["default"].navigator=this.navigator=new _core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_4__["default"];var view=Laya.Scene.root;if(view){var resize=function(){_core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_4__["default"].adjustViewPosition(this)};view.on(Laya.Event.RESIZE,view,resize);resize.call(view)}};Game.prototype._setupResLoadConfig=function(){var _this=this;Laya.loader.retryNum=3;Laya.loader.retryDelay=2e3;Laya.loader.maxLoader=5;if(Laya["MiniAdpter"]){var files=Laya.MiniAdpter.nativefiles||[];files.push("local");Laya.MiniAdpter.nativefiles=files}if(Laya.URL.formatURL){Laya.URL["formatURLCopy"]=Laya.URL.formatURL}Laya.URL.formatURL=function(url){if(Laya.URL["formatURLCopy"]){url=Laya.URL["formatURLCopy"](url)}if(_this.loadNetworkRes&&url.indexOf("remote/")>=0&&url.indexOf("http")<0){url=_DataCenter__WEBPACK_IMPORTED_MODULE_0__["default"].RESURL+url}return url};Laya.URL.exportSceneToJson=true};Game.prototype.initPlatform=function(){var _this=this;py.init();py.onShareAppMessage(function(){var msg=_PaoYa__WEBPACK_IMPORTED_MODULE_2__["default"].navigator.onShareAppMessage();if(msg){return msg}else{return _this.onShareAppMessage()}})};Game.prototype.checkUpdate=function(){var manager=new _wx_manager_UpdateManager__WEBPACK_IMPORTED_MODULE_1__["default"];manager.on(_wx_manager_UpdateManager__WEBPACK_IMPORTED_MODULE_1__["default"].HAS_UPDATE,this,function(){});manager.on(_wx_manager_UpdateManager__WEBPACK_IMPORTED_MODULE_1__["default"].UPDATE_READY,this,function(cb){_wx_Toast__WEBPACK_IMPORTED_MODULE_3__["default"].showModal("提示","新版本下载成功","重启",function(){cb&&cb()})});manager.on(_wx_manager_UpdateManager__WEBPACK_IMPORTED_MODULE_1__["default"].UPDATE_FAIL,this,function(){})};Game.prototype.onShareAppMessage=function(){return null};Game.prototype.exit=function(){py.exit()};Game.prototype.initRootScene=function(launchOption,isFirstLaunch){};Game.prototype.enterMain=function(){};return Game}(Laya.EventDispatcher);__webpack_exports__["default"]=Game},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var UpdateManager=function(_super){__extends(UpdateManager,_super);function UpdateManager(){var _this=_super.call(this)||this;var updateManager=py.getUpdateManager();updateManager.onCheckForUpdate(function(res){console.warn("当前 | "+(res.hasUpdate?"有":"无")+" | 新版本");if(res.hasUpdate){_this.event(UpdateManager.HAS_UPDATE)}});updateManager.onUpdateReady(function(){function cb(){updateManager.applyUpdate()}_this.event(UpdateManager.UPDATE_READY,cb)});updateManager.onUpdateFailed(function(){_this.event(UpdateManager.UPDATE_FAIL)});return _this}UpdateManager.HAS_UPDATE="HAS_UPDATE";UpdateManager.UPDATE_READY="UPDATE_READY";UpdateManager.UPDATE_FAIL="UPDATE_FAIL";return UpdateManager}(Laya.EventDispatcher);__webpack_exports__["default"]=UpdateManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var LaunchScreenView=function(_super){__extends(LaunchScreenView,_super);function LaunchScreenView(){var _this=_super.call(this)||this;_this.setup();return _this}LaunchScreenView.prototype.setup=function(){this.size(750,1334);var box=new Laya.Box;box.size(750,1334);box.cacheAs="normal";this.addChild(box);var imgBg=new Laya.Image("local/loading/bg.jpg");box.addChild(imgBg);var imgProgressBg=new Laya.Image("local/loading/progress-bg.png");imgProgressBg.sizeGrid="4,4,4,4";imgProgressBg.centerX=0;imgProgressBg.bottom=250;imgProgressBg.width=643;imgProgressBg.height=36;box.addChild(imgProgressBg);var imgProgress=new Laya.Image("local/loading/progress-bar.png");imgProgress.centerX=0;imgProgress.y=2;imgProgressBg.addChild(imgProgress);var imgProgressTag=new Laya.Image("local/loading/progress-tag.png");imgProgressTag.anchorX=.5;imgProgressTag.y=-24;imgProgressBg.addChild(imgProgressTag);this.imgProgressTag=imgProgressTag;this._imgProgress=imgProgress;var mask=new Laya.Sprite;mask.graphics.drawRect(0,0,0,77,"#ff0000");imgProgress.mask=mask;this._imgProgressMask=mask;var lblProgress=new Laya.Label("0%");lblProgress.color="#ffffff";lblProgress.fontSize=30;lblProgress.centerX=0;lblProgress.bottom=190;this.addChild(lblProgress);this._lblProgress=lblProgress;var lblTips=new Laya.Label("幸存者会加入你的队伍，请务必营救他们！");lblTips.color="#ccc";lblTips.fontSize=28;lblTips.centerX=0;lblTips.bottom=50;box.addChild(lblTips)};Object.defineProperty(LaunchScreenView.prototype,"progress",{get:function(){return this._progress},set:function(newValue){if(newValue!=this._progress){this._progress=newValue;this._imgProgressMask.graphics.clear();this._imgProgressMask.graphics.drawRect(0,0,newValue*this._imgProgress.width,this._imgProgress.height,"#ff0000");this.imgProgressTag.x=newValue*this._imgProgress.width}},enumerable:true,configurable:true});LaunchScreenView.setProgress=function(progress){if(!this.ins)return;this.ins.progress=progress;this.setTips(Math.ceil(progress*100)+"%")};LaunchScreenView.setTips=function(tip){this.ins._lblProgress.text=tip};LaunchScreenView.show=function(){var view=new LaunchScreenView;_core_navigator_Navigator__WEBPACK_IMPORTED_MODULE_0__["default"].adjustViewPosition(view);view.zOrder=999;Laya.stage.addChild(view);this.ins=view};LaunchScreenView.hide=function(){if(this.ins){this.ins.destroy()}};return LaunchScreenView}(Laya.View);__webpack_exports__["default"]=LaunchScreenView},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var NetworkMonitor=function(){function NetworkMonitor(){var _this=this;this.isConnected=true;this.isWIFI=true;this.type="";this.getCurrentType(function(type){_this.isConnected=type!="unknown"||type!="none";_this.isWIFI=type==="wifi";_this.type=type});this.startMonitor()}NetworkMonitor.prototype.startMonitor=function(){var _this=this;py.onNetworkStatusChange(function(res){_this.handleNetworkChange(res)})};NetworkMonitor.prototype.handleNetworkChange=function(res){this.isWIFI=res.networkType==="wifi";this.type=res.networkType;this.isConnected=res.isConnected;console.log("NETWORK | change :\n");console.log(JSON.stringify(res));_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].defaultCenter.event(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].NetworkChanged,res)};NetworkMonitor.prototype.stopMonitor=function(){py.offNetworkStatusChange(this.handleNetworkChange)};NetworkMonitor.prototype.getCurrentType=function(cb){py.getNetworkType({success:function(res){console.log("NETWORK | type :\n");console.log(JSON.stringify(res));cb&&cb(res.networkType)},fail:function(){}})};NetworkMonitor.NETWORK_CHANGE="NetworkMonitor.network.change";return NetworkMonitor}();__webpack_exports__["default"]=NetworkMonitor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var LifeCircleMonitor=function(){function LifeCircleMonitor(){this.inForeground=true;this.ignoreFirstTime=window["wx"]?true:false;this.startMonitor()}LifeCircleMonitor.prototype.startMonitor=function(){var _this=this;py.onShow(function(res){if(_this.ignoreFirstTime){_this.ignoreFirstTime=false;return}console.warn("SHOW :\n");console.warn(JSON.stringify(res));_this.inForeground=true;_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].defaultCenter.event(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].ApplicationShow,res)});py.onHide(function(res){console.warn("HIDE :\n");console.warn(JSON.stringify(res));_this.inForeground=false;_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].defaultCenter.event(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].ApplicationHide,res)})};LifeCircleMonitor.prototype.stopMonitor=function(){py.offShow({});py.offHide({})};LifeCircleMonitor.SHOW="app.on.show";LifeCircleMonitor.HIDE="app.on.hide";LifeCircleMonitor.OFF_SHOW="app.off.show";LifeCircleMonitor.OFF_HIDE="app.off.hide";return LifeCircleMonitor}();__webpack_exports__["default"]=LifeCircleMonitor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var PayManager=function(){function PayManager(){}PayManager.pay=function(buyQuantity,success,fail){py.requestPayment({env:this.env,offerId:this.offerId,currencyType:"CNY",buyQuantity:buyQuantity,success:function(res){console.log("PAY | suc | "+JSON.stringify(res));success&&success()},fail:function(res){console.log("PAY | fail | "+JSON.stringify(res));var msg=res.errMsg;var code=res.errCode;fail&&fail(code)}})};PayManager.env=0;PayManager.platform="android";return PayManager}();__webpack_exports__["default"]=PayManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SoundManager=function(_super){__extends(SoundManager,_super);function SoundManager(){return _super!==null&&_super.apply(this,arguments)||this}SoundManager.onShow=function(){this.onShowHandler&&this.onShowHandler()};SoundManager.onHide=function(){this.onHideHandler&&this.onHideHandler()};SoundManager.onAudioInterruptionBegin=function(){this.onAudioInterruptionBeginHandler&&this.onAudioInterruptionBeginHandler()};SoundManager.onAudioInterruptionEnd=function(){this.onAudioInterruptionEndHandler&&this.onAudioInterruptionEndHandler()};SoundManager._windowFocus=function(){Laya.stage["_isFocused"]=true;Laya.stage.event("focus");Laya.stage.event("focuschange")};SoundManager._windowBlur=function(){Laya.stage["_isFocused"]=false;Laya.stage.event("blur");Laya.stage.event("focuschange")};return SoundManager}(Laya.SoundManager);__webpack_exports__["default"]=SoundManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _export__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var Loader=function(){function Loader(){}Loader.load=function(url,caller,completion,p){if(p===void 0){p=null}var completeHandler=Laya.Handler.create(this,function(){completion&&completion.call(caller)});var progressHandler=Laya.Handler.create(this,function(progress){console.log("loading progress"+progress);p&&p.call(caller,progress)},null,false);Laya.loader.load(url,completeHandler,progressHandler)};Loader.preload=function(complete,progress){Laya.loader.load(_export__WEBPACK_IMPORTED_MODULE_0__["DataCenter"].GAMERES,complete,progress)};return Loader}();__webpack_exports__["default"]=Loader},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var TimerService=function(_super){__extends(TimerService,_super);function TimerService(duration,interval,up){if(interval===void 0){interval=1}if(up===void 0){up=false}var _this=_super.call(this)||this;_this.duration=duration;_this.interval=interval;_this.up=up;_this.curTime=0;return _this}TimerService.prototype.start=function(){this.curTime=this.up?0:this.duration;this.update();Laya.timer.loop(this.interval*1e3,this,this.update);this.event(TimerService.START,"")};TimerService.prototype.stop=function(){this.curTime=0;Laya.timer.clear(this,this.update);this.event(TimerService.STOP,"")};TimerService.prototype.update=function(){if(this.up){this.curTime++;if(this.curTime>=this.duration){this.stop()}else{this.event(TimerService.PROGRESS,this.curTime)}}else{if(this.curTime>0){this.curTime--;this.event(TimerService.PROGRESS,this.curTime)}else{this.stop()}}};TimerService.START="start_";TimerService.STOP="stop_";TimerService.TIMEOUT="timeout_";TimerService.PROGRESS="progress_";return TimerService}(Laya.EventDispatcher);__webpack_exports__["default"]=TimerService},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var _service_LoginService__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var LoginMaskView=function(_super){__extends(LoginMaskView,_super);function LoginMaskView(){var _this=_super.call(this)||this;_this.size(750,1334);_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].defaultCenter.on(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].LoginSuccess,_this,_this.destroy);_this.on(Laya.Event.CLICK,_this,function(){if(!PaoYa.game.isAuthed){console.warn("此时用户还没有完成授权");return}if(!_service_LoginService__WEBPACK_IMPORTED_MODULE_1__["default"].isLogined){console.warn("此时用户还没有登录成功");return}this.destroy()});return _this}LoginMaskView.showInView=function(view){if(_service_LoginService__WEBPACK_IMPORTED_MODULE_1__["default"].isLogined){return}var maskView=new LoginMaskView;this.view=maskView;view.addChild(maskView)};LoginMaskView.hide=function(){this.view.destroy()};LoginMaskView.prototype.destroy=function(){_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["default"].defaultCenter.off(_core_NotificationCenter__WEBPACK_IMPORTED_MODULE_0__["NotificationName"].LoginSuccess,this,this.destroy);this.removeSelf();_super.prototype.destroy.call(this,true)};return LoginMaskView}(Laya.View);__webpack_exports__["default"]=LoginMaskView},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var __extends=undefined&&undefined.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var RoundImageView=function(_super){__extends(RoundImageView,_super);function RoundImageView(skin){var _this=_super.call(this,skin)||this;_this.__init_$();return _this}RoundImageView.prototype.__init_$=function(){var _this=this;var mask=new Laya.Sprite;this.mask=mask;this.on(Laya.Event.RESIZE,this,function(){if(!_this.mask){return}_this.mask.graphics.clear();var width=_this.width,height=_this.height;var r=Math.ceil(Math.min(width,height)/2);_this.mask.graphics.drawCircle(r,r,r,"#ff0000")})};return RoundImageView}(Laya.Image);__webpack_exports__["default"]=RoundImageView;Laya.ClassUtils.regClass("PaoYa.RoundImageView",RoundImageView)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var AuthManager=function(){function AuthManager(){}AuthManager.auth=function(params){py.auth(params)};AuthManager.scope={userInfo:"scope.userInfo",userLocation:"scope.userLocation",address:"scope.address",invoiceTitle:"scope.invoiceTitle",werun:"scope.werun",record:"scope.record",writePhotosAlbum:"scope.writePhotosAlbum",camera:"scope.camera"};return AuthManager}();__webpack_exports__["default"]=AuthManager},function(module,exports){Object.defineProperty(Array.prototype,"lastObject",{configurable:false,enumerable:false,get:function(){if(!this.length){return null}return this[this.length-1]}});Object.defineProperty(Array.prototype,"randomItem",{configurable:false,enumerable:false,get:function(){if(!this.length){return null}var index=Math.floor(Math.random()*this.length);return this[index]}})},function(module,exports){Date.prototype.formatWithStyle=function(format){var y=this.getFullYear();var m=this.getMonth()+1;m=m<10?"0"+m:m;var d=this.getDate();d=d<10?"0"+d:d;var h=this.getHours();h=h<10?"0"+h:h;var minute=this.getMinutes();var second=this.getSeconds();minute=minute<10?"0"+minute:minute;second=second<10?"0"+second:second;format=format.replace("yyyy",y+"");format=format.replace("mm",m+"");format=format.replace("dd",d+"");format=format.replace("hh",h+"");format=format.replace("mm",minute+"");format=format.replace("ss",second+"");return format}},function(module,exports){Number.prototype.formatTime=function(format){if(format===void 0){format="H:M:S"}var seconds=this;seconds=Math.floor(seconds);var hour=Math.floor(seconds/3600);var hourStr=hour<10?"0"+hour:hour+"";var balance=seconds%3600;var minute=Math.floor(balance/60);var minuteStr=minute<10?"0"+minute:minute+"";var second=balance%60;var secondStr=second<10?"0"+second:second+"";if(format.indexOf("H")!=-1){format=format.replace(/H/,hourStr)}if(format.indexOf("M")!=-1){format=format.replace(/M/,minuteStr)}if(format.indexOf("S")!=-1){format=format.replace(/S/,secondStr)}return format}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _utils_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);Laya.View.prototype.createViewFromJSON=function(url,complete){var _this=this;if(!url)return;var type=Laya.Utils.getFileExtension(url);type||(url+=".json");Laya.loader.resetProgress();var loader=new Laya.SceneLoader;loader.on(Laya.Event.COMPLETE,null,function(){var obj=Laya.Loader.getRes(url);if(!obj)throw"Can not find scene:"+url;if(!_this._getBit(8)){console.warn("Scene has been Ready!!!");_this.event(Laya.Event.READY,_this);complete&&complete.runWith(null)}else{_this.on("onViewCreated",null,function(){_this.event(Laya.Event.READY,_this);complete&&complete.runWith(null)});_this.createView(obj)}});loader.load(url)};var LAST_CLICK_TIME="_last_click_time";Laya.Node.prototype.addClickListener=function(caller,method,throttle,fail){if(throttle===void 0){throttle=false}caller||(caller={});return this.on(Laya.Event.CLICK,this,function(args){if(!throttle){method.call(caller,args);return}var now=Date.now(),time=caller[LAST_CLICK_TIME]||0,delta=now-time;if(delta>1e3){method.call(caller,args)}else{fail&&fail.call(caller,"操作速度过快");console.warn("操作点击过快")}caller[LAST_CLICK_TIME]=now})};Laya.Node.prototype.dispatchLifeCycleEvent=function(method,p1,p2,p3,p4,p5){this.dispatchComponentEvent(method,p1,p2,p3,p4,p5);if(!this.destroyed){for(var i=0,length_1=this.numChildren;i<length_1;i++){var child=this.getChildAt(i);child.dispatchComponentEvent(method,p1,p2,p3,p4,p5)}}if(this[method]){this[method](p1,p2,p3,p4,p5)}};Laya.Node.prototype.dispatchComponentEvent=function(method,p1,p2,p3,p4,p5){var components=this["_components"]||[];components.forEach(function(item){if(item[method]&&item.enabled){item[method](p1,p2,p3,p4,p5)}})};Laya.Sprite.prototype.drawBackground=function(){this.graphics.clear();this.graphics.drawPath(0,0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__["default"].makeRoundRectPath(this.width,this.height,this._cornerRadius||0,PaoYa.RectCorner.RectCornerAllCorners),{fillStyle:this._backgroundColor})};Laya.Scene.load=function(url,complete,progress){Laya.loader.resetProgress();var loader=new Laya.SceneLoader;loader.on("progress",null,onProgress);loader.once("complete",null,done);loader.load(url);function onProgress(value){if(Laya.Scene["_loadPage"])Laya.Scene["_loadPage"].event("progress",value);progress&&progress.runWith(value)}function done(){if(Laya.Scene["_prepareHandler"]){var prepare=Laya.Scene["_prepareHandler"];if(typeof prepare=="function"){prepare();create()}else if(typeof prepare=="object"){if(prepare["async"]){prepare["async"](function(){create()})}else{prepare["sync"]();create()}}}else{create()}}function create(){Laya.Scene["_prepareHandler"]=null;loader.off("progress",null,onProgress);var p=url;if(p instanceof Array){url=p[p.length-1]}var obj=Laya.Loader.getRes(url);if(!obj)throw"Can not find scene:"+url;if(!obj.props)throw"Scene data is error:"+url;var runtime=obj.props.runtime?obj.props.runtime:obj.type;var clas=Laya.ClassUtils.getClass(runtime);if(obj.props.renderType=="instance"){var scene=clas.instance||(clas.instance=new clas)}else{scene=new clas}if(scene&&scene instanceof laya.display.Node){scene.url=url;if(!scene._getBit(8)){complete&&complete.runWith(scene);Laya.Scene.hideLoadingPage()}else{scene.on("onViewCreated",null,function(){Laya.Scene.hideLoadingPage();complete&&complete.runWith(scene)});scene.createView(obj)}}else{throw"Can not find scene:"+runtime}}};Object.defineProperty(Laya.Sprite.prototype,"backgroundColor",{configurable:false,enumerable:false,get:function(){return this._backgroundColor||null},set:function(color){if(!color||color==this._backgroundColor)return;this._backgroundColor=color;Laya.timer.callLater(this,this.drawBackground)}});Object.defineProperty(Laya.Sprite.prototype,"cornerRadius",{configurable:false,enumerable:false,get:function(){return this._cornerRadius||0},set:function(radius){if(!radius||this._cornerRadius==radius)return;this._cornerRadius=radius;Laya.timer.callLater(this,this.drawBackground)}})}]);
